{"version":3,"sources":["writeFileToAssets.js"],"names":[],"mappings":";;;;;;;;;;;;;AAGA,IAAM,KAAK,mBAAQ,YAAR,CAAqB,QAAQ,UAAR,CAArB,CAAL;;;kBAGS,UAAC,IAAD,EAAU;AACrB,QAAM,cAAc,KAAK,WAAL;;AADC,QAGf,cAAc,KAAK,WAAL,CAAiB,OAAjB,CAAyB,KAAzB,EAAgC,GAAhC,CAAd,CAHe;AAIrB,QAAM,aAAa,KAAK,UAAL,CAJE;AAKrB,QAAM,aAAa,KAAK,UAAL,CALE;AAMrB,QAAM,mBAAmB,KAAK,gBAAL,CANJ;AAOrB,QAAM,iBAAiB,KAAK,cAAL,CAPF;;AASrB,QAAI,YAAY,MAAZ,CAAmB,WAAnB,KAAmC,CAAC,UAAD,EAAa;AAChD,eAAO,mBAAQ,OAAR,EAAP,CADgD;KAApD;;AAIA,WAAO,GACN,SADM,CACI,UADJ,EAEN,IAFM,CAED,UAAC,IAAD,EAAU;AACZ,YAAI,KAAK,WAAL,MAAsB,CAAC,cAAD,IAAmB,KAAK,KAAL,CAAW,OAAX,KAAuB,gBAAvB,EAAyC;AAClF,mBAAO,IAAP,CADkF;SAAtF;;AAIA,oBAAY,MAAZ,CAAmB,WAAnB,IAAkC;AAC9B,kCAAQ;AACJ,uBAAO,KAAK,IAAL,CADH;aADsB;AAI9B,sCAAU;AACN,uBAAO,GAAG,YAAH,CAAgB,UAAhB,CAAP,CADM;aAJoB;SAAlC,CALY;;AAcZ,eAAO,WAAP,CAdY;KAAV,CAFN,CAbqB;CAAV","file":"writeFileToAssets.js","sourcesContent":["import Promise from 'bluebird';\n\n/* eslint-disable import/no-commonjs */\nconst fs = Promise.promisifyAll(require('fs-extra'));\n/* eslint-enable */\n\nexport default (opts) => {\n    const compilation = opts.compilation;\n    // ensure forward slashes\n    const relFileDest = opts.relFileDest.replace(/\\\\/g, '/');\n    const absFileSrc = opts.absFileSrc;\n    const forceWrite = opts.forceWrite;\n    const lastGlobalUpdate = opts.lastGlobalUpdate;\n    const copyUnmodified = opts.copyUnmodified;\n\n    if (compilation.assets[relFileDest] && !forceWrite) {\n        return Promise.resolve();\n    }\n\n    return fs\n    .statAsync(absFileSrc)\n    .then((stat) => {\n        if (stat.isDirectory() || !copyUnmodified && stat.mtime.getTime() < lastGlobalUpdate) {\n            return null;\n        }\n\n        compilation.assets[relFileDest] = {\n            size () {\n                return stat.size;\n            },\n            source () {\n                return fs.readFileSync(absFileSrc);\n            }\n        };\n\n        return relFileDest;\n    });\n};\n"],"sourceRoot":"/source/"}