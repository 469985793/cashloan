{"version":3,"sources":["writeDirectoryToAssets.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAM,MAAM,mBAAQ,YAAR,CAAqB,QAAQ,UAAR,CAArB,CAAN;;;kBAGS,UAAC,IAAD,EAAU;AACrB,QAAM,cAAc,KAAK,WAAL,CADC;AAErB,QAAM,YAAY,KAAK,SAAL,CAFG;AAGrB,QAAM,aAAa,KAAK,UAAL,CAHE;AAIrB,QAAM,UAAU,KAAK,OAAL,CAJK;AAKrB,QAAM,aAAa,KAAK,UAAL,CALE;AAMrB,QAAM,aAAa,KAAK,UAAL,CANE;AAOrB,QAAM,iBAAiB,KAAK,cAAL,CAPF;AAQrB,QAAM,mBAAmB,KAAK,gBAAL,CARJ;;AAUrB,WAAO,IAAI,UAAJ,CAAe,SAAf,EACF,GADE,CACE,UAAC,UAAD,EAAgB;AACjB,YAAI,oBAAJ,CADiB;;AAGjB,YAAM,aAAa,eAAK,QAAL,CAAc,SAAd,EAAyB,UAAzB,CAAb,CAHW;;AAKjB,sBAAc,eAAK,IAAL,CAAU,UAAV,EAAsB,UAAtB,CAAd;;;AALiB,YAQb,OAAJ,EAAa;AACT,0BAAc,eAAK,IAAL,CAAU,UAAV,EAAsB,eAAK,QAAL,CAAc,WAAd,CAAtB,CAAd,CADS;SAAb;;;AARiB,YAab,4BAAa,UAAb,EAAyB,UAAzB,CAAJ,EAA0C;AACtC,mBAAO,KAAP,CADsC;SAA1C;;;AAbiB,YAkBb,oBAAO,WAAP,MAAwB,eAAK,GAAL,EAAU;AAClC,0BAAc,YAAY,KAAZ,CAAkB,CAAlB,CAAd,CADkC;SAAtC;;AAIA,eAAO,iCAAkB;AACrB,kCADqB;AAErB,oCAFqB;AAGrB,0CAHqB;AAIrB,kCAJqB;AAKrB,8CALqB;AAMrB,oCANqB;SAAlB,CAAP,CAtBiB;KAAhB,CADT,CAVqB;CAAV","file":"writeDirectoryToAssets.js","sourcesContent":["import Promise from 'bluebird';\nimport _ from 'lodash';\nimport shouldIgnore from './shouldIgnore';\nimport path from 'path';\nimport writeFileToAssets from './writeFileToAssets';\n\n/* eslint-disable import/no-commonjs */\nconst dir = Promise.promisifyAll(require('node-dir'));\n/* eslint-enable */\n\nexport default (opts) => {\n    const compilation = opts.compilation;\n    const absDirSrc = opts.absDirSrc;\n    const relDirDest = opts.relDirDest;\n    const flatten = opts.flatten;\n    const forceWrite = opts.forceWrite;\n    const ignoreList = opts.ignoreList;\n    const copyUnmodified = opts.copyUnmodified;\n    const lastGlobalUpdate = opts.lastGlobalUpdate;\n\n    return dir.filesAsync(absDirSrc)\n        .map((absFileSrc) => {\n            let relFileDest;\n\n            const relFileSrc = path.relative(absDirSrc, absFileSrc);\n\n            relFileDest = path.join(relDirDest, relFileSrc);\n\n            // Remove any directory reference if flattening\n            if (flatten) {\n                relFileDest = path.join(relDirDest, path.basename(relFileDest));\n            }\n\n            // Skip if it matches any of our ignore list\n            if (shouldIgnore(relFileSrc, ignoreList)) {\n                return false;\n            }\n\n            // Make sure it doesn't start with the separator\n            if (_.head(relFileDest) === path.sep) {\n                relFileDest = relFileDest.slice(1);\n            }\n\n            return writeFileToAssets({\n                absFileSrc,\n                compilation,\n                copyUnmodified,\n                forceWrite,\n                lastGlobalUpdate,\n                relFileDest\n            });\n        });\n};\n"],"sourceRoot":"/source/"}